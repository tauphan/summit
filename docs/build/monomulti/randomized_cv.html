<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Randomized example selection for classification &mdash;
        MultiviewPlatform 0 documentation</title>


    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
    <link rel="index" title="Index" href="../genindex.html"/>
    <link rel="search" title="Search" href="../search.html"/>


    <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">


<div class="wy-grid-for-nav">


    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">


                <a href="../index.html" class="icon icon-home">
                    MultiviewPlatform


                </a>


                <div class="version">
                    0.0.0
                </div>


                <div role="search">
                    <form id="rtd-search-form" class="wy-form"
                          action="../search.html" method="get">
                        <input type="text" name="q" placeholder="Search docs"/>
                        <input type="hidden" name="check_keywords" value="yes"/>
                        <input type="hidden" name="area" value="default"/>
                    </form>
                </div>


            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix"
                 role="navigation" aria-label="main navigation">


                <p class="caption"><span class="caption-text">Contents:</span>
                </p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal"
                                              href="../readme.html">Read me</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal"
                                              href="../api.html">Multiview
                        Platform</a></li>
                </ul>


            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


        <nav class="wy-nav-top" aria-label="top navigation">

            <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
            <a href="../index.html">MultiviewPlatform</a>

        </nav>


        <div class="wy-nav-content">

            <div class="rst-content">


                <div role="navigation" aria-label="breadcrumbs navigation">

                    <ul class="wy-breadcrumbs">

                        <li><a href="../index.html">Docs</a> &raquo;</li>

                        <li>Randomized example selection for classification</li>


                        <li class="wy-breadcrumbs-aside">


                            <a href="../_sources/monomulti/randomized_cv.ipynb.txt"
                               rel="nofollow"> View page source</a>


                        </li>

                    </ul>


                    <hr/>
                </div>
                <div role="main" class="document" itemscope="itemscope"
                     itemtype="http://schema.org/Article">
                    <div itemprop="articleBody">


                        <style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

                        </style>
                        <div class="section"
                             id="Randomized-example-selection-for-classification">
                            <h1>Randomized example selection for
                                classification<a class="headerlink"
                                                 href="#Randomized-example-selection-for-classification"
                                                 title="Permalink to this headline">¶</a>
                            </h1>
                            <div class="section"
                                 id="Train/test-split-generation">
                                <h2>Train/test split generation<a
                                        class="headerlink"
                                        href="#Train/test-split-generation"
                                        title="Permalink to this headline">¶</a>
                                </h2>
                                <p>The train/test splits are generated in the
                                    <code class="docutils literal notranslate"><span
                                            class="pre">execution.genSplits</span></code>
                                    function. It’s task is to generate an
                                    train/test split for each
                                    statistical itetarion. In order to do that,
                                    it is fed by the following
                                    inputs * <code
                                            class="docutils literal notranslate"><span
                                            class="pre">labels</span></code> are
                                    the data labels for all the dataset, *
                                    <code class="docutils literal notranslate"><span
                                            class="pre">splitRatio</span></code>
                                    is a real number giving the ratio
                                    |test|/|all|, *
                                    <code class="docutils literal notranslate"><span
                                            class="pre">statsIterRandomStates</span></code>
                                    is a list of <code
                                            class="docutils literal notranslate"><span
                                            class="pre">numpy</span></code>
                                    random states used to
                                    generate reproductible pseudo-random numbers
                                </p>
                                <p>The main operation in this function is done
                                    by the
                                    <code class="docutils literal notranslate"><span
                                            class="pre">sklearn.model_selection.StratifiedShuffleSplit</span></code>
                                    function which
                                    returns folds that are made by preserving
                                    the percentage of samples for
                                    each class. In this case we askittosplit the
                                    dataset in two subsets with
                                    the asked test size. It then returns a
                                    shuffled train/test split while
                                    preserving the percentage of samples for
                                    each class. We store the
                                    examples indices in two <code
                                            class="docutils literal notranslate"><span
                                            class="pre">np.array</span></code>s
                                    called <code
                                            class="docutils literal notranslate"><span
                                            class="pre">trainIndices</span></code>
                                    and
                                    <code class="docutils literal notranslate"><span
                                            class="pre">testIndices</span></code>
                                    All the algortihms will then train
                                    (hyper-parameters
                                    cross-validation &amp; learning) on the
                                    trainIndices.</p>
                                <div class="nbinput nblast docutils container">
                                    <div class="prompt highlight-none notranslate">
                                        <div class="highlight"><pre>
<span></span>In [1]:
</pre>
                                        </div>
                                    </div>
                                    <div class="input_area highlight-ipython3 notranslate">
                                        <div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">genSplits</span><span
                                                class="p">(</span><span
                                                class="n">labels</span><span
                                                class="p">,</span> <span
                                                class="n">splitRatio</span><span
                                                class="p">,</span> <span
                                                class="n">statsIterRandomStates</span><span
                                                class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Used to gen the train/test splits using one or multiple random states</span>
<span class="sd">    classificationIndices is a list of train/test splits&quot;&quot;&quot;</span>
    <span class="n">indices</span> <span class="o">=</span> <span
                                                class="n">np</span><span
                                                class="o">.</span><span
                                                class="n">arange</span><span
                                                class="p">(</span><span
                                                class="nb">len</span><span
                                                class="p">(</span><span
                                                class="n">labels</span><span
                                                class="p">))</span>
    <span class="n">splits</span> <span class="o">=</span> <span
                                                class="p">[]</span>
    <span class="k">for</span> <span class="n">randomState</span> <span
                                                class="ow">in</span> <span
                                                class="n">statsIterRandomStates</span><span
                                                class="p">:</span>
        <span class="n">foldsObj</span> <span class="o">=</span> <span
                                                class="n">sklearn</span><span
                                                class="o">.</span><span
                                                class="n">model_selection</span><span
                                                class="o">.</span><span
                                                class="n">StratifiedShuffleSplit</span><span
                                                class="p">(</span><span
                                                class="n">n_splits</span><span
                                                class="o">=</span><span
                                                class="mi">1</span><span
                                                class="p">,</span>
                                                                  <span class="n">random_state</span><span
                                                class="o">=</span><span
                                                class="n">randomState</span><span
                                                class="p">,</span>
                                                                  <span class="n">test_size</span><span
                                                class="o">=</span><span
                                                class="n">splitRatio</span><span
                                                class="p">)</span>
        <span class="n">folds</span> <span class="o">=</span> <span class="n">foldsObj</span><span
                                                class="o">.</span><span
                                                class="n">split</span><span
                                                class="p">(</span><span
                                                class="n">indices</span><span
                                                class="p">,</span> <span
                                                class="n">labels</span><span
                                                class="p">)</span>
        <span class="k">for</span> <span class="n">fold</span> <span class="ow">in</span> <span
                                                class="n">folds</span><span
                                                class="p">:</span>
            <span class="n">train_fold</span><span class="p">,</span> <span
                                                class="n">test_fold</span> <span
                                                class="o">=</span> <span
                                                class="n">fold</span>
        <span class="n">trainIndices</span> <span class="o">=</span> <span
                                                class="n">indices</span><span
                                                class="p">[</span><span
                                                class="n">train_fold</span><span
                                                class="p">]</span>
        <span class="n">testIndices</span> <span class="o">=</span> <span
                                                class="n">indices</span><span
                                                class="p">[</span><span
                                                class="n">test_fold</span><span
                                                class="p">]</span>
        <span class="n">splits</span><span class="o">.</span><span class="n">append</span><span
                                                class="p">([</span><span
                                                class="n">trainIndices</span><span
                                                class="p">,</span> <span
                                                class="n">testIndices</span><span
                                                class="p">])</span>

    <span class="k">return</span> <span class="n">splits</span>
</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="section" id="Multiclass-problems">
                                <h2>Multiclass problems<a class="headerlink"
                                                          href="#Multiclass-problems"
                                                          title="Permalink to this headline">¶</a>
                                </h2>
                                <p>To be able to use the platform on multiclass
                                    problems, a one-versus-one
                                    method is implemented. In orderto use
                                    one-versus-one we need to modify
                                    the train/test splits generated by the
                                    previouslydescribed founction. If
                                    the problem the platformis asked to resolve
                                    is multiclass then, it will
                                    generate all the possible two-class
                                    combinations to divide the main
                                    problem in multiple biclass ones. In order
                                    to adapt each split, the
                                    <code class="docutils literal notranslate"><span
                                            class="pre">genMulticlassLabels</span></code>
                                    function will create new train/test splits
                                    by :
                                    * Generating an <code
                                            class="docutils literal notranslate"><span
                                            class="pre">oldIndices</span></code>
                                    list containing all the examples indices
                                    that have their label in the combination *
                                    Generate a new train split
                                    by selecting only the indices of <code
                                            class="docutils literal notranslate"><span
                                            class="pre">trainIndices</span></code>
                                    that have their labels
                                    in the combination. * Do the samething for
                                    the test indices * Copy the
                                    old <code
                                            class="docutils literal notranslate"><span
                                            class="pre">testIndices</span></code>
                                    variable in a new one called
                                    <code class="docutils literal notranslate"><span
                                            class="pre">testIndicesMulticlass</span></code>
                                    that will be used to predict on the entire
                                    dataset once the algorithm has learn to
                                    distinguish two classes *
                                    Generate a new <code
                                            class="docutils literal notranslate"><span
                                            class="pre">label</span></code>
                                    array by replacing all the labels that are
                                    not
                                    in the combination by -100 to flag them as
                                    unseen labels during the
                                    training phase.</p>
                                <p>Then the function will return a triplet : *
                                    <code class="docutils literal notranslate"><span
                                            class="pre">multiclassLabels</span></code>
                                    is a
                                    list containing, for each combination, the
                                    newly generated labels with
                                    ones and zeros for each of the labels in the
                                    combination and -100 for
                                    the others. * <code
                                            class="docutils literal notranslate"><span
                                            class="pre">labelsIndices</span></code>
                                    is a list contaningall the
                                    combinations, * <code
                                            class="docutils literal notranslate"><span
                                            class="pre">indicesMulticlass</span></code>
                                    is a list containig triplets for
                                    each statistical iteration : * <code
                                            class="docutils literal notranslate"><span
                                            class="pre">trainIndices</span></code>
                                    are the indices used
                                    for training that were picked only in the
                                    two classes of the combination
                                    (at the second step of the previous list), *
                                    <code class="docutils literal notranslate"><span
                                            class="pre">testIndices</span></code>
                                    are the
                                    indices used for testing the
                                    biclass-generalization capacity of each
                                    biclass classifier learned on <code
                                            class="docutils literal notranslate"><span
                                            class="pre">trainIndices</span></code>
                                    that were picked only in
                                    the two classes of the combination (at the
                                    third step of the previous
                                    list), * <code
                                            class="docutils literal notranslate"><span
                                            class="pre">tesIndicesMulticlass</span></code>
                                    are the indices described at the
                                    fourth setp of the previous list.</p>
                            </div>
                            <div class="section" id="Cross-validation-folds">
                                <h2>Cross-validation folds<a class="headerlink"
                                                             href="#Cross-validation-folds"
                                                             title="Permalink to this headline">¶</a>
                                </h2>
                                <p>The cross validation folds are generated
                                    using a <code
                                            class="docutils literal notranslate"><span
                                            class="pre">StratifiedKFold</span></code>
                                    object, for the <code
                                            class="docutils literal notranslate"><span
                                            class="pre">sklearn.model_selection</span></code>
                                    library. * For all the
                                    <strong>monoview</strong> algorithms, these
                                    objects (one for each statistical
                                    iteration) are then fed in a <code
                                            class="docutils literal notranslate"><span
                                            class="pre">sklearn.model_selection</span></code>
                                    <code class="docutils literal notranslate"><span
                                            class="pre">RandomisedSearchCV</span></code>
                                    object. So we don’t have any custom stuff
                                    about
                                    cross-vaildation folds in the monoview case
                                    * In the <strong>multiview</strong>
                                    case, they are used in the <code
                                            class="docutils literal notranslate"><span
                                            class="pre">utils.HyperParametersSearch</span></code>
                                    module, in
                                    the <code
                                            class="docutils literal notranslate"><span
                                            class="pre">randomizedSearch</span></code>
                                    function. In this case, they are used to
                                    split
                                    the learning set with
                                    <code class="docutils literal notranslate"><span
                                            class="pre">multiviewFolds</span>
                                        <span class="pre">=</span> <span
                                                class="pre">KFolds.split(learningIndices,</span>
                                        <span class="pre">labels[learningIndices])</span></code>
                                    and then used in <code
                                            class="docutils literal notranslate"><span
                                            class="pre">for</span> <span
                                            class="pre">trainIndices,</span>
                                        <span class="pre">testIndices</span>
                                        <span class="pre">in</span> <span
                                                class="pre">multiviewFolds:</span></code>
                                </p>
                            </div>
                        </div>


                    </div>

                </div>
                <footer>


                    <hr/>

                    <div role="contentinfo">
                        <p>
                            &copy; Copyright 2018, Baptiste BAUVIN.

                        </p>
                    </div>
                    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using
                    a <a
                        href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
                    provided by <a href="https://readthedocs.org">Read the
                    Docs</a>.

                </footer>

            </div>
        </div>

    </section>

</div>


<script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };

</script>
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<script type="text/javascript" src="../_static/js/theme.js"></script>

<script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });

</script>

</body>
</html>